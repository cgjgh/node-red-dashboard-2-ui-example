(function(){"use strict";try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".highlighted-row{background-color:rgb(var(--v-theme-surface))}.main{min-width:100%;max-width:fit-content;overflow:auto;display:inline-block}.v-data-table tbody tr:nth-of-type(2n){background-color:#00000008}.v-data-table__td.v-data-table-column--align-center,.v-data-table__td.v-data-table-column--align-start{margin-right:0!important;padding-right:0!important}")),document.head.appendChild(t)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(h,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("vuex")):typeof define=="function"&&define.amd?define(["exports","vue","vuex"],e):(h=typeof globalThis<"u"?globalThis:h||self,e(h["ui-scheduler"]={},h.Vue,h.vuex))})(this,function(h,e,B){"use strict";const I=(o,t)=>{const l=o.__vccOpts||o;for(const[n,s]of t)l[n]=s;return l},q={key:0},M={style:{"padding-right":"0","margin-right":"0",width:"fit-content"}},U={key:0},j=["colspan"],$={key:0},A={key:1},O={key:0},H={key:1},R={class:"text-h5"},F={class:"d-flex align-items-center"},P={key:0},L={key:1,style:{width:"100%"}},W={style:{width:"100%"}},G={key:1};function J(o,t,l){let n,s,m;const d=Math.floor(o*6),N=o*6-d,u=l*(1-t),c=l*(1-N*t),y=l*(1-(1-N)*t);switch(d%6){case 0:n=l,s=y,m=u;break;case 1:n=c,s=l,m=u;break;case 2:n=u,s=l,m=y;break;case 3:n=u,s=c,m=l;break;case 4:n=y,s=u,m=l;break;case 5:n=l,s=u,m=c;break}return`rgb(${Math.round(n*255)},${Math.round(s*255)},${Math.round(m*255)})`}const z={name:"UIScheduler",inject:["$socket","$dataTracker"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({})}},data(){return{items:null,currentSchedule:null,isEditing:!1,selectedTopic:"All",now:new Date().getTime(),validationResult:{alert:!1,message:""},name:"",enabled:!0,topic:null,scheduleType:"time",period:"daily",time:null,endTime:null,hasEndTime:!1,hasDuration:!1,duration:null,dailyDays:[],dailyDaysOfWeek:[],weeklyDays:[],monthlyDays:[],yearlyDay:1,yearlyMonth:null,minutesInterval:null,hourlyInterval:null,solarEvent:"sunrise",offset:0,payloadValue:!0,modalTime:!1,modalEndTime:!1,dialog:!1,dialogDelete:!1,expanded:[],expandedItem:null,updatingExpanded:!1,headers:[{title:"Name",align:"start",key:"name"},{title:"Description",align:"start",key:"description"},{title:"Enabled",align:"center",key:"action"}],months:["January","February","March","April","May","June","July","August","September","October","November","December"],daysOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],solarEvents:[{title:"Night End",value:"nightEnd"},{title:"Nautical Dawn",value:"nauticalDawn"},{title:"Civil Dawn",value:"civilDawn"},{title:"Sunrise",value:"sunrise"},{title:"Sunrise End",value:"sunriseEnd"},{title:"Morning Golden Hour End",value:"morningGoldenHourEnd"},{title:"Solar Noon",value:"solarNoon"},{title:"Evening Golden Hour Start",value:"eveningGoldenHourStart"},{title:"Sunset Start",value:"sunsetStart"},{title:"Sunset",value:"sunset"},{title:"Civil Dusk",value:"civilDusk"},{title:"Nautical Dusk",value:"nauticalDusk"},{title:"Night Start",value:"nightStart"},{title:"Nadir",value:"nadir"}],rules:{required:o=>!!o||"Required.",endTimeRule:o=>this.endTime>this.time||"End time must be after start time"}}},computed:{...B.mapState("data",["messages"]),schedules:{get(){return this.items||this.getProperty("schedules")},set(o){this.items=o}},formattedTime(){return this.time?this.formatTime(this.time):""},formattedEndTime(){return this.endTime?this.formatTime(this.endTime):""},durationItems(){if(this.scheduleType==="time"){if(this.period==="minutes")return this.generateNumberArray(1,this.minutesInterval);if(this.period==="hourly")return this.generateNumberArray(1,this.hourlyInterval*60-1)}else if(this.scheduleType==="solar")return this.generateNumberArray(1,360);return[]},offsetItems(){return this.generateNumberArray(-120,120)},daysOfMonth(){if(this.period==="yearly"){const o=this.getMaxDaysInMonth(this.yearlyMonth);return o===0?[]:this.generateNumberArray(1,o)}else{const o=this.generateNumberArray(1,31);return o.push("Last"),o}},uniqueTopics(){if(this.schedules&&Array.isArray(this.schedules)){const o=this.schedules.map(t=>t.topic);return[...new Set(o)]}else return[]},filteredSchedules(){return(this.selectedTopic==="All"?this.schedules:this.schedules.filter(t=>t.topic===this.selectedTopic)).map((t,l)=>({...t,rowNumber:l+1}))},filteredHeaders(){return this.$vuetify.display.xs?this.headers.map(o=>o.key==="name"?{title:"No.",align:"start",key:"rowNumber",width:"0%"}:o):this.headers}},watch:{expanded(o){if(!this.updatingExpanded&&o.length>0){const t=o[o.length-1];if(o.length===1){this.$nextTick(()=>this.highlightExpandedRow());const l=this.schedules.find(n=>n.name===t);this.requestStatus(l)}if(this.expanded[0]===t)return;this.updatingExpanded=!0,this.expanded=[o[o.length-1]],this.updatingExpanded=!1}},yearlyMonth(o){const t=this.getMaxDaysInMonth(o);this.yearlyDay>t&&(this.yearlyDay=null)}},created(){this.$dataTracker(this.id,this.onInput,this.onLoad,this.onDynamicProperties),this.$socket.emit("widget-load",this.id)},mounted(){this.updateNowUTC(),setInterval(this.updateNowUTC,1e3)},unmounted(){window.removeEventListener("resize",this.handleResize)},methods:{onLoad(o){var t;o&&(this.$store.commit("data/bind",{widgetId:this.id,msg:o}),o.payload!==void 0&&(this.schedules=((t=o.payload)==null?void 0:t.schedules)||[]))},onInput(o){this.$store.commit("data/bind",{widgetId:this.id,msg:o}),console.log("onInput",o)},onDynamicProperties(o){var l;const t=(l=o.ui_update)==null?void 0:l.schedules;t&&Array.isArray(t)&&(this.schedules=t||[]),o.ui_update},isRowExpanded(o){return this.expanded.includes(o.name)},highlightExpandedRow(){this.$el.querySelectorAll("tr").forEach(t=>{var n;const l=(n=t.querySelector("td:first-child"))==null?void 0:n.textContent.trim();this.expanded.includes(l)?t.classList.add("highlighted-row"):t.classList.remove("highlighted-row")})},handleRowClick(o,t){this.expanded.length===0||this.expanded[0]!==t.item.name?this.expanded=[t.item.name]:this.expanded=[]},filterSchedules(){},generateNumberArray(o,t){const l=[];for(let n=o;n<=t;n++)l.push(n);return l},getMaxDaysInMonth(o){const t=this.months.indexOf(o)+1;return t===0?0:t===2?29:new Date(2024,t,0).getDate()},mapSolarEvent(o,t=!0){const l=this.solarEvents.find(n=>t?n.value===o:n.title===o);return l?t?l.title:l.value:o},sendSchedule(o){const t={_event:"submit",payload:{schedules:[o]}};this.$socket.emit("submit",this.id,t)},formatTime(o){if(!o)return"";const[t,l]=o.split(":");if(this.props.use24HourFormat)return`${t}:${l}`;{const n=t>=12?"PM":"AM";return`${t%12||12}:${l} ${n}`}},updateNowUTC(){this.now=new Date().getTime()},toTitleCase(o){return o.charAt(0).toUpperCase()+o.slice(1)},openDialog(){this.dialog=!0,this.isEditing=!1,this.resetForm()},closeDialog(){this.dialog=!1},progressValue(o){const{nextEndUTC:t,currentStartTime:l}=o,n=new Date(t).getTime(),s=new Date(l).getTime();if(!n||!s)return 0;const m=Math.round((this.now-s)/(n-s)*100);return Math.min(Math.max(m,0),100)},progressColor(o){const l=this.progressValue(o)/100*120/360;return J(l,1,1)},saveSchedule(){if(this.validationResult=this.validateSchedule(),this.validationResult.alert)return;const o={name:this.name,enabled:this.enabled,topic:this.topic,scheduleType:this.scheduleType};this.scheduleType==="time"&&(o.period=this.period,["daily","weekly","monthly","yearly"].includes(this.period)&&(o.time=this.time,o.days=this.getSelectedDays(),o.hasEndTime=this.hasEndTime,o.endTime=this.hasEndTime?this.endTime:null),this.period==="yearly"&&(o.month=this.yearlyMonth),this.period==="minutes"&&(o.minutesInterval=this.minutesInterval,o.hasDuration=this.hasDuration,o.duration=this.duration),this.period==="hourly"&&(o.hourlyInterval=this.hourlyInterval,o.hasDuration=this.hasDuration,o.duration=this.duration)),this.scheduleType==="solar"&&(o.solarEvent=this.mapSolarEvent(this.solarEvent,!1),o.offset=this.offset,this.hasDuration&&(o.hasDuration=this.hasDuration,o.duration=this.duration)),this.hasDuration||this.hasEndTime?(o.payloadValue=!0,o.endPayloadValue=!1):o.payloadValue=this.payloadValue,this.isEditing?Object.assign(this.currentSchedule,o):(this.schedules||(this.schedules=[]),this.schedules.push(o)),this.sendSchedule(o),this.closeDialog()},validateSchedule(){if(!this.name)return{alert:!0,message:"Schedule Name is required."};if(this.schedules?this.schedules.some(t=>t.name===this.name&&t!==this.currentSchedule):!1)return{alert:!0,message:"Schedule Name must be unique."};if(!this.topic)return{alert:!0,message:"Topic is required."};if(this.scheduleType==="time"){if(["daily","weekly","monthly","yearly"].includes(this.period)){if(!this.time)return{alert:!0,message:"Start Time is required."};if(this.hasEndTime){if(!this.endTime)return{alert:!0,message:"End Time is required."};if(this.endTime<=this.time)return{alert:!0,message:"End Time must be after Start Time."}}if(!this.getSelectedDays().length)return{alert:!0,message:`At least one day must be selected for ${this.period} period.`}}else if(this.period==="minutes"){if(!this.minutesInterval)return{alert:!0,message:"Interval is required for Minutes period."};if(this.hasDuration&&!this.duration)return{alert:!0,message:"Duration is required when Duration is enabled for Minutes period."}}else if(this.period==="hourly"){if(!this.hourlyInterval)return{alert:!0,message:"Interval is required for Hourly period."};if(this.hasDuration&&!this.duration)return{alert:!0,message:"Duration is required when Duration is enabled for Hourly period."}}}else if(this.scheduleType==="solar"){if(!this.solarEvent)return{alert:!0,message:"Solar Event is required."};if(!this.offset&&this.offset!==0)return{alert:!0,message:"Offset is required for Solar schedule type."};if(this.hasDuration&&!this.duration)return{alert:!0,message:"Duration is required when Duration is enabled for Solar schedule type."}}return this.payloadValue===null&&(this.hasDuration||this.hasEndTime)?{alert:!0,message:"Output value is required."}:{alert:!1,message:""}},getSelectedDays(){return this.period==="daily"?this.dailyDays:this.period==="weekly"?this.weeklyDays:this.period==="monthly"?this.monthlyDays:this.period==="yearly"?[this.yearlyDay]:[]},toggleSchedule(o){const t=!o.enabled;o.name&&this.$socket.emit("setEnabled",this.id,{_event:"setEnabled",payload:{name:o.name,enabled:t}})},requestStatus(o){o.name&&this.$socket.emit("requestStatus",this.id,{_event:"requestStatus",payload:{name:o.name}})},toggleExpandedItem(o){this.expandedItem=this.expandedItem===o?null:o,this.requestStatus(o)},editSchedule(o){this.currentSchedule=o,this.isEditing=!0,this.name=o.name,this.topic=o.topic,this.period=o.period,this.time=o.time,this.enabled=o.enabled,o.period==="minutes"?(this.minutesInterval=o.minutesInterval,this.duration=o.duration,this.hasDuration=!!o.duration):o.period==="hourly"?(this.hourlyInterval=o.hourlyInterval,this.duration=o.duration,this.hasDuration=!!o.duration):o.period==="daily"?this.dailyDays=o.days:o.period==="weekly"?this.weeklyDays=o.days:o.period==="monthly"?this.monthlyDays=o.days.map(t=>t==="Last"?"Last":Number(t)):o.period==="yearly"&&(this.yearlyDay=o.days[0],this.yearlyMonth=o.month),this.hasEndTime=o.hasEndTime,this.hasEndTime&&(this.endTime=o.endTime),this.scheduleType=o.scheduleType||"time",this.offset=o.offset||0,this.solarEvent=this.mapSolarEvent(o.solarEvent)||"",this.hasDuration=o.hasDuration||!1,this.duration=o.hasDuration?o.duration:null,this.dialog=!0},resetForm(){const o="New Schedule";let t=o,l=2;if(this.schedules)for(;this.schedules.some(n=>n.name===t);)t=`${o} ${l}`,l++;this.name=t,Array.isArray(this.props.topics)&&this.props.topics.length>0?this.selectedTopic==="All"?this.topic=this.props.topics[0]:this.topic=this.selectedTopic:this.topic=null,this.period="daily",this.dailyDays=["Monday","Tuesday","Wednesday","Thursday","Friday"],this.weeklyDays=["Monday"],this.monthlyDays=[1],this.yearlyDay=1,this.yearlyMonth="January",this.solarEvent="Sunrise",this.time="00:00",this.hasEndTime=!1,this.endTime="00:01",this.enabled=!0,this.offset=0,this.scheduleType="time",this.hasDuration=!1,this.duration=1,this.payloadValue=!0},setEndTime(){if(!this.hasEndTime)this.endTime=null;else if(!this.time)this.endTime=null;else{const[o,t]=this.time.split(":").map(Number);let l=o,n=t+5;n>=60&&(n-=60,l+=1),l>=24&&(l-=24);const s=String(l).padStart(2,"0"),m=String(n).padStart(2,"0");this.endTime=`${s}:${m}`}},openDeleteDialog(){this.dialogDelete=!0},closeDelete(){this.dialogDelete=!1},deleteConfirm(){if(this.currentSchedule){const o=this.schedules.indexOf(this.currentSchedule);o>-1&&(this.schedules.splice(o,1),this.$socket.emit("remove",this.id,{_event:"remove",payload:{name:this.currentSchedule.name}})),this.closeDialog()}this.dialogDelete=!1}}},Y=I(Object.assign(z,{setup(o){return(t,l)=>{const n=e.resolveComponent("v-toolbar-title"),s=e.resolveComponent("v-select"),m=e.resolveComponent("v-icon"),d=e.resolveComponent("v-btn"),N=e.resolveComponent("v-toolbar"),u=e.resolveComponent("v-chip"),c=e.resolveComponent("v-switch"),y=e.resolveComponent("v-progress-linear"),g=e.resolveComponent("v-card-title"),i=e.resolveComponent("v-col"),C=e.resolveComponent("v-row"),E=e.resolveComponent("v-card-text"),w=e.resolveComponent("v-card"),K=e.resolveComponent("v-data-table"),Q=e.resolveComponent("v-alert"),T=e.resolveComponent("v-text-field"),f=e.resolveComponent("v-divider"),p=e.resolveComponent("v-label"),V=e.resolveComponent("v-btn-toggle"),x=e.resolveComponent("v-time-picker"),k=e.resolveComponent("v-dialog"),b=e.resolveComponent("v-card-actions"),S=e.resolveComponent("v-spacer"),X=e.resolveComponent("v-container");return e.openBlock(),e.createBlock(X,{class:"pa-0 main",style:{border:"1.5px solid grey","border-radius":"10px"}},{default:e.withCtx(()=>[e.createVNode(N,{border:"",color:"navigation-background",rounded:"lg"},{default:e.withCtx(()=>[e.createVNode(n,null,{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(o.props.label),1)]),_:1}),e.createVNode(s,{modelValue:t.selectedTopic,"onUpdate:modelValue":[l[0]||(l[0]=a=>t.selectedTopic=a),t.filterSchedules],items:["All",...t.uniqueTopics],label:"Topic",style:{"max-width":"fit-content"},rounded:"lg",variant:"solo-inverted"},null,8,["modelValue","items","onUpdate:modelValue"]),e.createVNode(d,{onClick:l[1]||(l[1]=a=>t.openDialog())},{default:e.withCtx(()=>[e.createVNode(m,null,{default:e.withCtx(()=>l[31]||(l[31]=[e.createTextVNode("mdi-plus")])),_:1})]),_:1})]),_:1}),e.createVNode(K,{expanded:t.expanded,"onUpdate:expanded":l[2]||(l[2]=a=>t.expanded=a),headers:t.filteredHeaders,items:t.filteredSchedules,"hide-default-footer":"",density:"compact","show-expand":!t.$vuetify.display.xs,"item-value":"name",expand:t.expandedItem,"onClick:row":t.handleRowClick},{"item.rowNumber":e.withCtx(({item:a})=>[e.createVNode(u,{color:a.active===void 0?"gray":a.active?"green":"red"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.rowNumber),1)]),_:2},1032,["color"])]),"item.name":e.withCtx(({item:a})=>[a.active===void 0?(e.openBlock(),e.createElementBlock("div",q,e.toDisplayString(a.name),1)):(e.openBlock(),e.createBlock(u,{key:1,color:a.active?"green":"red"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.name),1)]),_:2},1032,["color"]))]),"item.action":e.withCtx(({item:a})=>[e.createElementVNode("div",M,[e.createVNode(c,{modelValue:a.enabled,"onUpdate:modelValue":r=>a.enabled=r,color:"primary","hide-details":"",disabled:a.isStatic,onClick:e.withModifiers(r=>t.toggleSchedule(a),["stop"])},null,8,["modelValue","onUpdate:modelValue","disabled","onClick"])])]),"expanded-row":e.withCtx(({columns:a,item:r})=>[r?(e.openBlock(),e.createElementBlock("tr",U,[e.createElementVNode("td",{colspan:a.length},[e.createVNode(w,null,{default:e.withCtx(()=>[r.active?(e.openBlock(),e.createBlock(y,{key:0,color:t.progressColor(r),"model-value":t.progressValue(r),stream:"",rounded:"",height:6},null,8,["color","model-value"])):e.createCommentVNode("v-if",!0),e.createVNode(g,{class:"d-flex align-items-center justify-space-between"},{default:e.withCtx(()=>[r&&r.name?(e.openBlock(),e.createElementBlock("div",$,[l[32]||(l[32]=e.createElementVNode("strong",null,"Name:",-1)),e.createTextVNode(" "+e.toDisplayString(r.name),1)])):(e.openBlock(),e.createElementBlock("div",A,l[33]||(l[33]=[e.createElementVNode("em",null,"No item selected",-1)]))),r?(e.openBlock(),e.createBlock(d,{key:2,icon:"",disabled:r.isStatic||r.readonly,onClick:D=>t.editSchedule(r)},{default:e.withCtx(()=>[e.createVNode(m,null,{default:e.withCtx(()=>l[34]||(l[34]=[e.createTextVNode("mdi-pencil")])),_:1})]),_:2},1032,["disabled","onClick"])):e.createCommentVNode("v-if",!0)]),_:2},1024),e.createVNode(E,null,{default:e.withCtx(()=>[e.createVNode(C,null,{default:e.withCtx(()=>[r.topic?(e.openBlock(),e.createBlock(i,{key:0,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[35]||(l[35]=e.createElementVNode("strong",null,"Topic:",-1)),e.createTextVNode(" "+e.toDisplayString(r.topic),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.period?(e.openBlock(),e.createBlock(i,{key:1,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[36]||(l[36]=e.createElementVNode("strong",null,"Period:",-1)),e.createTextVNode(" "+e.toDisplayString(t.toTitleCase(r.period)),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.yearlyMonth?(e.openBlock(),e.createBlock(i,{key:2,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[37]||(l[37]=e.createElementVNode("strong",null,"Month:",-1)),e.createTextVNode(" "+e.toDisplayString(r.yearlyMonth),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.days?(e.openBlock(),e.createBlock(i,{key:3,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[38]||(l[38]=e.createElementVNode("strong",null,"Days:",-1)),e.createTextVNode(" "+e.toDisplayString(r.period==="monthly"||r.period==="yearly"?r.days.join(", "):r.days.map(D=>D.slice(0,3)).join(", ")),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.time?(e.openBlock(),e.createBlock(i,{key:4,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[39]||(l[39]=e.createElementVNode("strong",null,"Start Time:",-1)),e.createTextVNode(" "+e.toDisplayString(t.formatTime(r.time)),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.hasEndTime?(e.openBlock(),e.createBlock(i,{key:5,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[40]||(l[40]=e.createElementVNode("strong",null,"End Time:",-1)),e.createTextVNode(" "+e.toDisplayString(r.hasEndTime?t.formatTime(r.endTime):"-"),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.minutesInterval?(e.openBlock(),e.createBlock(i,{key:6,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[41]||(l[41]=e.createElementVNode("strong",null,"Interval:",-1)),e.createTextVNode(" "+e.toDisplayString(r.minutesInterval),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.hourlyInterval?(e.openBlock(),e.createBlock(i,{key:7,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[42]||(l[42]=e.createElementVNode("strong",null,"Interval:",-1)),e.createTextVNode(" "+e.toDisplayString(r.hourlyInterval),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.hasDuration?(e.openBlock(),e.createBlock(i,{key:8,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[43]||(l[43]=e.createElementVNode("strong",null,"Duration:",-1)),e.createTextVNode(" "+e.toDisplayString(r.duration),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.solarEvent?(e.openBlock(),e.createBlock(i,{key:9,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[44]||(l[44]=e.createElementVNode("strong",null,"Solar Event:",-1)),e.createTextVNode(" "+e.toDisplayString(t.mapSolarEvent(r.solarEvent)),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.offset?(e.openBlock(),e.createBlock(i,{key:10,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[45]||(l[45]=e.createElementVNode("strong",null,"Offset:",-1)),e.createTextVNode(" "+e.toDisplayString(r.offset),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.nextDate?(e.openBlock(),e.createBlock(i,{key:11,cols:"12",sm:"6"},{default:e.withCtx(()=>[l[46]||(l[46]=e.createElementVNode("strong",null,"Next Date:",-1)),e.createTextVNode(" "+e.toDisplayString(r.nextDate),1)]),_:2},1024)):e.createCommentVNode("v-if",!0),r.nextDescription?(e.openBlock(),e.createBlock(i,{key:12,cols:"12",sm:"6",onClick:D=>t.requestStatus(r)},{default:e.withCtx(()=>[l[47]||(l[47]=e.createElementVNode("strong",null,"Next Description:",-1)),e.createTextVNode(" "+e.toDisplayString(r.nextDescription),1)]),_:2},1032,["onClick"])):e.createCommentVNode("v-if",!0),e.createVNode(i,{cols:"12",sm:"6"},{default:e.withCtx(()=>[r.hasDuration||r.hasEndTime?(e.openBlock(),e.createElementBlock("span",O,l[48]||(l[48]=[e.createElementVNode("strong",null,"Output:",-1),e.createElementVNode("em",null,"True",-1),e.createTextVNode(" on start and "),e.createElementVNode("em",null,"False",-1),e.createTextVNode(" on end. ")]))):r.payloadValue?(e.openBlock(),e.createElementBlock("span",H,[l[49]||(l[49]=e.createElementVNode("strong",null,"Output:",-1)),e.createTextVNode(" "+e.toDisplayString(r.payloadValue),1)])):e.createCommentVNode("v-if",!0)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)],8,j)])):e.createCommentVNode("v-if",!0)]),"no-data":e.withCtx(()=>l[50]||(l[50]=[e.createElementVNode("div",{class:"text-center my-4"},"No Schedules",-1)])),_:1},8,["expanded","headers","items","show-expand","expand","onClick:row"]),e.createVNode(k,{modelValue:t.dialog,"onUpdate:modelValue":l[29]||(l[29]=a=>t.dialog=a),color:"background","max-width":"450px"},{default:e.withCtx(()=>[e.createVNode(w,null,{default:e.withCtx(()=>[e.createVNode(Q,{modelValue:t.validationResult.alert,"onUpdate:modelValue":l[3]||(l[3]=a=>t.validationResult.alert=a),type:"error",closable:""},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.validationResult.message),1)]),_:1},8,["modelValue"]),e.createVNode(g,{class:"d-flex align-items-center justify-space-between"},{default:e.withCtx(()=>[e.createElementVNode("span",R,e.toDisplayString(t.isEditing?"Edit Schedule":"New Schedule"),1),e.createElementVNode("div",F,[e.createVNode(c,{modelValue:t.enabled,"onUpdate:modelValue":l[4]||(l[4]=a=>t.enabled=a),label:t.enabled?"Enabled":"Disabled",color:t.enabled?"primary":"default",required:"",class:"mr-2"},null,8,["modelValue","label","color"]),t.isEditing?(e.openBlock(),e.createBlock(d,{key:0,icon:"","max-height":"50",color:"red-lighten-1",onClick:l[5]||(l[5]=a=>t.openDeleteDialog())},{default:e.withCtx(()=>[e.createVNode(m,null,{default:e.withCtx(()=>l[51]||(l[51]=[e.createTextVNode("mdi-delete")])),_:1})]),_:1})):e.createCommentVNode("v-if",!0)])]),_:1}),e.createVNode(E,null,{default:e.withCtx(()=>[e.createVNode(C,{class:"justify-center"},{default:e.withCtx(()=>[e.createVNode(i,{cols:"12"},{default:e.withCtx(()=>[e.createVNode(T,{modelValue:t.name,"onUpdate:modelValue":l[6]||(l[6]=a=>t.name=a),label:"Schedule Name",rules:[t.rules.required],required:"",disabled:t.isEditing},null,8,["modelValue","rules","disabled"])]),_:1}),e.createVNode(f,{inset:""}),e.createVNode(i,{cols:"12"},{default:e.withCtx(()=>[e.createVNode(i,{cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(p,null,{default:e.withCtx(()=>l[52]||(l[52]=[e.createTextVNode("Topic")])),_:1})]),_:1}),e.createVNode(s,{modelValue:t.topic,"onUpdate:modelValue":l[7]||(l[7]=a=>t.topic=a),items:o.props.topics,label:"Select Topic",required:"",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1}),e.createVNode(f,{inset:""}),e.createElementVNode("div",null,[e.createVNode(i,{cols:"12"},{default:e.withCtx(()=>[e.createVNode(i,{cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(p,null,{default:e.withCtx(()=>l[53]||(l[53]=[e.createTextVNode("Type")])),_:1})]),_:1}),e.createVNode(V,{modelValue:t.scheduleType,"onUpdate:modelValue":l[8]||(l[8]=a=>t.scheduleType=a),label:"Schedule Type",mandatory:"",divided:"",variant:"elevated",border:"sm",rounded:"xl"},{default:e.withCtx(()=>[e.createVNode(d,{"prepend-icon":"mdi-clock-outline",value:"time"},{default:e.withCtx(()=>l[54]||(l[54]=[e.createTextVNode(" Time ")])),_:1}),e.createVNode(d,{"prepend-icon":"mdi-sun-clock",value:"solar"},{default:e.withCtx(()=>l[55]||(l[55]=[e.createTextVNode(" Solar ")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),e.createVNode(f,{inset:""}),t.scheduleType==="time"?(e.openBlock(),e.createElementBlock("div",P,[e.createVNode(i,{cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(p,null,{default:e.withCtx(()=>l[56]||(l[56]=[e.createTextVNode("Period")])),_:1})]),_:1}),e.createVNode(i,{cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(V,{modelValue:t.period,"onUpdate:modelValue":l[9]||(l[9]=a=>t.period=a),class:"d-flex flex-wrap",style:{"min-height":"fit-content"},"min-width":"100%",label:"Period",mandatory:"",border:"sm"},{default:e.withCtx(()=>[e.createVNode(i,null,{default:e.withCtx(()=>[e.createVNode(C,{"min-width":"fit-content"},{default:e.withCtx(()=>[e.createVNode(d,{"prepend-icon":"mdi-timer-refresh-outline",value:"minutes","max-width":"fit-content"},{default:e.withCtx(()=>l[57]||(l[57]=[e.createTextVNode(" Minute ")])),_:1}),e.createVNode(d,{"prepend-icon":"mdi-timer-refresh",value:"hourly","max-width":"fit-content"},{default:e.withCtx(()=>l[58]||(l[58]=[e.createTextVNode(" Hour ")])),_:1}),e.createVNode(d,{"prepend-icon":"mdi-calendar-range",value:"daily","max-width":"fit-content"},{default:e.withCtx(()=>l[59]||(l[59]=[e.createTextVNode(" Day ")])),_:1})]),_:1}),e.createVNode(C,null,{default:e.withCtx(()=>[e.createVNode(d,{"prepend-icon":"mdi-calendar-weekend",value:"weekly","max-width":"fit-content"},{default:e.withCtx(()=>l[60]||(l[60]=[e.createTextVNode(" Week ")])),_:1}),e.createVNode(d,{"prepend-icon":"mdi-calendar-month-outline",value:"monthly","max-width":"fit-content"},{default:e.withCtx(()=>l[61]||(l[61]=[e.createTextVNode(" Month ")])),_:1}),e.createVNode(d,{"prepend-icon":"mdi-calendar-today-outline",value:"yearly","max-width":"fit-content"},{default:e.withCtx(()=>l[62]||(l[62]=[e.createTextVNode(" Year ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),t.period==="daily"?(e.openBlock(),e.createBlock(i,{key:0,cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:t.dailyDays,"onUpdate:modelValue":l[10]||(l[10]=a=>t.dailyDays=a),"prepend-icon":"mdi-calendar-range",items:t.daysOfWeek,label:"Select Days",multiple:"",required:"",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1})):e.createCommentVNode("v-if",!0),t.period==="weekly"?(e.openBlock(),e.createBlock(i,{key:1,cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:t.weeklyDays,"onUpdate:modelValue":l[11]||(l[11]=a=>t.weeklyDays=a),"prepend-icon":"mdi-calendar-weekend",items:t.daysOfWeek,label:"Select Days",multiple:"",required:"",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1})):e.createCommentVNode("v-if",!0),t.period==="monthly"?(e.openBlock(),e.createBlock(i,{key:2,cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:t.monthlyDays,"onUpdate:modelValue":l[12]||(l[12]=a=>t.monthlyDays=a),"prepend-icon":"mdi-calendar-month-outline",items:t.daysOfMonth,label:"Select Days",multiple:"",required:"",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1})):e.createCommentVNode("v-if",!0),t.period==="yearly"?(e.openBlock(),e.createBlock(i,{key:3,cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:t.yearlyMonth,"onUpdate:modelValue":l[13]||(l[13]=a=>t.yearlyMonth=a),"prepend-icon":"mdi-calendar-month-outline",items:t.months,label:"Select Month",required:"",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1})):e.createCommentVNode("v-if",!0),t.period==="yearly"?(e.openBlock(),e.createBlock(i,{key:4,cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:t.yearlyDay,"onUpdate:modelValue":l[14]||(l[14]=a=>t.yearlyDay=a),"prepend-icon":"mdi-calendar-today-outline",items:t.daysOfMonth,label:"Select Day",required:"",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1})):e.createCommentVNode("v-if",!0),t.period==="minutes"?(e.openBlock(),e.createBlock(i,{key:5,cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:t.minutesInterval,"onUpdate:modelValue":l[15]||(l[15]=a=>t.minutesInterval=a),"prepend-icon":"mdi-timer-refresh-outline",items:t.generateNumberArray(1,59),label:"Interval (Minutes)",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1})):e.createCommentVNode("v-if",!0),t.period==="hourly"?(e.openBlock(),e.createBlock(i,{key:6,cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:t.hourlyInterval,"onUpdate:modelValue":l[16]||(l[16]=a=>t.hourlyInterval=a),"prepend-icon":"mdi-timer-refresh",items:t.generateNumberArray(1,23),label:"Interval (Hours)",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1})):e.createCommentVNode("v-if",!0),t.period!=="minutes"&&t.period!=="hourly"?(e.openBlock(),e.createBlock(i,{key:7,cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(T,{modelValue:t.formattedTime,"onUpdate:modelValue":l[19]||(l[19]=a=>t.formattedTime=a),active:t.modalTime,focused:t.modalTime,label:"Start Time","prepend-icon":"mdi-clock-time-four-outline",readonly:"",rules:[t.rules.required]},{default:e.withCtx(()=>[e.createVNode(k,{modelValue:t.modalTime,"onUpdate:modelValue":l[18]||(l[18]=a=>t.modalTime=a),activator:"parent",width:"auto"},{default:e.withCtx(()=>[t.modalTime?(e.openBlock(),e.createBlock(x,{key:0,modelValue:t.time,"onUpdate:modelValue":l[17]||(l[17]=a=>t.time=a),max:t.hasEndTime?t.endTime:void 0,format:o.props.use24HourFormat?"24hr":"ampm","ampm-in-title":!o.props.use24HourFormat},null,8,["modelValue","max","format","ampm-in-title"])):e.createCommentVNode("v-if",!0)]),_:1},8,["modelValue"])]),_:1},8,["modelValue","active","focused","rules"])]),_:1})):e.createCommentVNode("v-if",!0),t.hasEndTime&&t.period!=="minutes"&&t.period!=="hourly"?(e.openBlock(),e.createBlock(i,{key:8,cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(T,{modelValue:t.formattedEndTime,"onUpdate:modelValue":l[22]||(l[22]=a=>t.formattedEndTime=a),active:t.modalEndTime,focused:t.modalEndTime,label:"End Time","prepend-icon":"mdi-clock-time-four-outline",readonly:"",rules:[t.rules.endTimeRule]},{default:e.withCtx(()=>[e.createVNode(k,{modelValue:t.modalEndTime,"onUpdate:modelValue":l[21]||(l[21]=a=>t.modalEndTime=a),activator:"parent",width:"auto"},{default:e.withCtx(()=>[t.modalEndTime?(e.openBlock(),e.createBlock(x,{key:0,modelValue:t.endTime,"onUpdate:modelValue":l[20]||(l[20]=a=>t.endTime=a),min:t.time,format:o.props.use24HourFormat?"24hr":"ampm","ampm-in-title":!o.props.use24HourFormat},null,8,["modelValue","min","format","ampm-in-title"])):e.createCommentVNode("v-if",!0)]),_:1},8,["modelValue"])]),_:1},8,["modelValue","active","focused","rules"])]),_:1})):e.createCommentVNode("v-if",!0),e.createVNode(f,{inset:""}),t.period!=="minutes"&&t.period!=="hourly"?(e.openBlock(),e.createBlock(i,{key:9,cols:"12",class:"d-flex flex-column align-center"},{default:e.withCtx(()=>[e.createVNode(i,{cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(p,null,{default:e.withCtx(()=>l[63]||(l[63]=[e.createTextVNode("Timespan")])),_:1})]),_:1}),e.createVNode(V,{modelValue:t.hasEndTime,"onUpdate:modelValue":[l[23]||(l[23]=a=>t.hasEndTime=a),t.setEndTime],mandatory:"",divided:"",variant:"elevated",border:"sm",rounded:"xl"},{default:e.withCtx(()=>[e.createVNode(d,{value:!1},{default:e.withCtx(()=>l[64]||(l[64]=[e.createTextVNode("No End Time")])),_:1}),e.createVNode(d,{value:!0},{default:e.withCtx(()=>l[65]||(l[65]=[e.createTextVNode("End Time")])),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:1})):e.createCommentVNode("v-if",!0)])):e.createCommentVNode("v-if",!0),t.scheduleType==="solar"?(e.openBlock(),e.createElementBlock("div",L,[e.createVNode(i,{cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(p,null,{default:e.withCtx(()=>l[66]||(l[66]=[e.createTextVNode("Event")])),_:1})]),_:1}),e.createVNode(s,{modelValue:t.solarEvent,"onUpdate:modelValue":l[24]||(l[24]=a=>t.solarEvent=a),items:t.solarEvents,label:"Select Event",required:"",rules:[t.rules.required],"prepend-icon":"mdi-sun-clock-outline"},null,8,["modelValue","items","rules"]),e.createVNode(i,{cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:t.offset,"onUpdate:modelValue":l[25]||(l[25]=a=>t.offset=a),"prepend-icon":"mdi-plus-minus",items:t.offsetItems,label:"Offset (minutes)",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1}),e.createVNode(f,{inset:""})])):e.createCommentVNode("v-if",!0),e.createElementVNode("div",W,[t.period==="minutes"||t.period==="hourly"||t.scheduleType==="solar"?(e.openBlock(),e.createBlock(i,{key:0,cols:"12",class:"d-flex flex-column align-center"},{default:e.withCtx(()=>[e.createVNode(i,{cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(p,null,{default:e.withCtx(()=>l[67]||(l[67]=[e.createTextVNode("Timespan")])),_:1})]),_:1}),e.createVNode(V,{modelValue:t.hasDuration,"onUpdate:modelValue":l[26]||(l[26]=a=>t.hasDuration=a),mandatory:"",divided:"",variant:"elevated",border:"sm",rounded:"xl"},{default:e.withCtx(()=>[e.createVNode(d,{value:!1},{default:e.withCtx(()=>l[68]||(l[68]=[e.createTextVNode("No Duration")])),_:1}),e.createVNode(d,{value:!0},{default:e.withCtx(()=>l[69]||(l[69]=[e.createTextVNode("Duration")])),_:1})]),_:1},8,["modelValue"])]),_:1})):e.createCommentVNode("v-if",!0),(t.period==="minutes"||t.period==="hourly"||t.scheduleType==="solar")&&t.hasDuration?(e.openBlock(),e.createBlock(i,{key:1,cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(s,{modelValue:t.duration,"onUpdate:modelValue":l[27]||(l[27]=a=>t.duration=a),"prepend-icon":"mdi-timer-sand-complete",items:t.durationItems,label:"Duration (minutes)",rules:[t.rules.required]},null,8,["modelValue","items","rules"])]),_:1})):e.createCommentVNode("v-if",!0),e.createVNode(f,{inset:""}),e.createVNode(i,{cols:"12",class:"d-flex flex-column align-center"},{default:e.withCtx(()=>[e.createVNode(i,{cols:"12",class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(p,null,{default:e.withCtx(()=>l[70]||(l[70]=[e.createTextVNode("Output")])),_:1})]),_:1}),t.scheduleType==="time"&&(t.period==="daily"||t.period==="weekly"||t.period==="monthly"||t.period==="yearly")&&!t.hasEndTime||(t.scheduleType==="time"&&(t.period==="minutes"||t.period==="hourly")||t.scheduleType==="solar")&&!t.hasDuration?(e.openBlock(),e.createBlock(V,{key:0,modelValue:t.payloadValue,"onUpdate:modelValue":l[28]||(l[28]=a=>t.payloadValue=a),mandatory:"",divided:"",variant:"elevated",border:"sm",rounded:"xl"},{default:e.withCtx(()=>[e.createVNode(d,{value:!1},{default:e.withCtx(()=>l[71]||(l[71]=[e.createTextVNode("False")])),_:1}),e.createVNode(d,{value:!0},{default:e.withCtx(()=>l[72]||(l[72]=[e.createTextVNode("True")])),_:1})]),_:1},8,["modelValue"])):(e.openBlock(),e.createElementBlock("span",G,l[73]||(l[73]=[e.createElementVNode("em",null,"True",-1),e.createTextVNode(" on start and "),e.createElementVNode("em",null,"False",-1),e.createTextVNode(" on end.")])))]),_:1})])]),_:1})]),_:1}),e.createVNode(b,{class:"d-flex justify-center"},{default:e.withCtx(()=>[e.createVNode(d,{variant:"tonal",color:"success",onClick:t.saveSchedule},{default:e.withCtx(()=>l[74]||(l[74]=[e.createTextVNode("Save")])),_:1},8,["onClick"]),e.createVNode(d,{variant:"tonal",color:"error",onClick:t.closeDialog},{default:e.withCtx(()=>l[75]||(l[75]=[e.createTextVNode("Cancel")])),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e.createVNode(k,{modelValue:t.dialogDelete,"onUpdate:modelValue":l[30]||(l[30]=a=>t.dialogDelete=a),color:"background","max-width":"500px"},{default:e.withCtx(()=>[e.createVNode(w,null,{default:e.withCtx(()=>[e.createVNode(g,{class:"text-h6"},{default:e.withCtx(()=>l[76]||(l[76]=[e.createTextVNode(" Are you sure you want to delete this schedule? ")])),_:1}),e.createVNode(b,null,{default:e.withCtx(()=>[e.createVNode(S),e.createVNode(d,{variant:"tonal",onClick:t.closeDelete},{default:e.withCtx(()=>l[77]||(l[77]=[e.createTextVNode("Cancel")])),_:1},8,["onClick"]),e.createVNode(d,{variant:"tonal",color:"error",onClick:t.deleteConfirm},{default:e.withCtx(()=>l[78]||(l[78]=[e.createTextVNode("Delete")])),_:1},8,["onClick"]),e.createVNode(S)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}}),[["__file","C:/Users/cgjgh/Documents/GitHub/node-red-dashboard-2-ui-example/ui/components/UIScheduler.vue"]]);h.UIScheduler=Y,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=ui-scheduler.umd.js.map
